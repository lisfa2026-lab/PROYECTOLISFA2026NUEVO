{"ast":null,"code":"import _objectSpread from\"C:/Users/Coordinaci\\xF3n B\\xE1sicos/Desktop/PROYECTOLISFA2026NUEVO/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{Card,CardContent,CardHeader,CardTitle}from\"@/components/ui/card\";import{Button}from\"@/components/ui/button\";import{LogOut,UserCheck,Calendar,TrendingUp}from\"lucide-react\";import{toast}from\"sonner\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=process.env.REACT_APP_BACKEND_URL;const API=\"\".concat(BACKEND_URL,\"/api\");const ParentDashboard=_ref=>{let{user,onLogout}=_ref;const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchStudents();},[]);const fetchStudents=async()=>{try{const response=await axios.get(\"\".concat(API,\"/parents/\").concat(user.id,\"/students\"));setStudents(response.data);// Fetch attendance for each student\nconst studentsWithAttendance=await Promise.all(response.data.map(async student=>{try{const statsResponse=await axios.get(\"\".concat(API,\"/attendance/stats/\").concat(student.id));return _objectSpread(_objectSpread({},student),{},{stats:statsResponse.data});}catch(error){return _objectSpread(_objectSpread({},student),{},{stats:null});}}));setStudents(studentsWithAttendance);}catch(error){toast.error(\"Error al cargar estudiantes\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen\",style:{background:'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/logo.jpeg\",alt:\"LISFA\",className:\"w-12 h-12 object-contain\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",style:{color:'#7cb342',fontFamily:'Manrope, sans-serif'},children:\"Panel de Padre de Familia\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:user.full_name})]})]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline\",onClick:onLogout,className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-4 h-4\"}),\"Cerrar Sesi\\xF3n\"]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6\",children:\"Mis Hijos\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})}):students.length===0?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{className:\"py-12 text-center text-gray-500\",children:\"No hay estudiantes vinculados\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:students.map(student=>/*#__PURE__*/_jsxs(Card,{className:\"card-hover\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[student.photo_url?/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(BACKEND_URL).concat(student.photo_url),alt:student.full_name,className:\"w-16 h-16 rounded-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(UserCheck,{className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CardTitle,{className:\"text-lg\",children:student.full_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[student.grade,\" - \",student.section]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:student.student_id})]})]})}),/*#__PURE__*/_jsx(CardContent,{children:student.stats?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"D\\xEDas Presente:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:student.stats.present_days})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"D\\xEDas Ausente:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:student.stats.absent_days})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Tasa de Asistencia:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-green-600\",children:[student.stats.attendance_rate,\"%\"]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"No hay datos de asistencia\"})})]},student.id))})]})]});};export default ParentDashboard;","map":{"version":3,"names":["useState","useEffect","axios","Card","CardContent","CardHeader","CardTitle","Button","LogOut","UserCheck","Calendar","TrendingUp","toast","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","API","concat","ParentDashboard","_ref","user","onLogout","students","setStudents","loading","setLoading","fetchStudents","response","get","id","data","studentsWithAttendance","Promise","all","map","student","statsResponse","_objectSpread","stats","error","className","style","background","children","src","alt","color","fontFamily","full_name","variant","onClick","length","photo_url","grade","section","student_id","present_days","absent_days","attendance_rate"],"sources":["C:/Users/Coordinación Básicos/Desktop/PROYECTOLISFA2026NUEVO/frontend/src/pages/ParentDashboard.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut, UserCheck, Calendar, TrendingUp } from \"lucide-react\";\nimport { toast } from \"sonner\";\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nconst ParentDashboard = ({ user, onLogout }) => {\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchStudents();\n  }, []);\n\n  const fetchStudents = async () => {\n    try {\n      const response = await axios.get(`${API}/parents/${user.id}/students`);\n      setStudents(response.data);\n      \n      // Fetch attendance for each student\n      const studentsWithAttendance = await Promise.all(\n        response.data.map(async (student) => {\n          try {\n            const statsResponse = await axios.get(`${API}/attendance/stats/${student.id}`);\n            return { ...student, stats: statsResponse.data };\n          } catch (error) {\n            return { ...student, stats: null };\n          }\n        })\n      );\n      setStudents(studentsWithAttendance);\n    } catch (error) {\n      toast.error(\"Error al cargar estudiantes\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen\" style={{ background: 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)' }}>\n      <div className=\"bg-white shadow-md\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <img \n                src=\"/logo.jpeg\" \n                alt=\"LISFA\" \n                className=\"w-12 h-12 object-contain\"\n              />\n              <div>\n                <h1 className=\"text-2xl font-bold\" style={{ color: '#7cb342', fontFamily: 'Manrope, sans-serif' }}>\n                  Panel de Padre de Familia\n                </h1>\n                <p className=\"text-sm text-gray-600\">{user.full_name}</p>\n              </div>\n            </div>\n            <Button variant=\"outline\" onClick={onLogout} className=\"flex items-center gap-2\">\n              <LogOut className=\"w-4 h-4\" />\n              Cerrar Sesión\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">Mis Hijos</h2>\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"spinner\"></div>\n          </div>\n        ) : students.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center text-gray-500\">\n              No hay estudiantes vinculados\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {students.map((student) => (\n              <Card key={student.id} className=\"card-hover\">\n                <CardHeader>\n                  <div className=\"flex items-center space-x-4\">\n                    {student.photo_url ? (\n                      <img \n                        src={`${BACKEND_URL}${student.photo_url}`} \n                        alt={student.full_name}\n                        className=\"w-16 h-16 rounded-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center\">\n                        <UserCheck className=\"w-8 h-8 text-gray-400\" />\n                      </div>\n                    )}\n                    <div>\n                      <CardTitle className=\"text-lg\">{student.full_name}</CardTitle>\n                      <p className=\"text-sm text-gray-600\">{student.grade} - {student.section}</p>\n                      <p className=\"text-xs text-gray-500\">{student.student_id}</p>\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  {student.stats ? (\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Días Presente:</span>\n                        <span className=\"font-semibold\">{student.stats.present_days}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Días Ausente:</span>\n                        <span className=\"font-semibold\">{student.stats.absent_days}</span>\n                      </div>\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-sm text-gray-600\">Tasa de Asistencia:</span>\n                        <span className=\"font-semibold text-green-600\">{student.stats.attendance_rate}%</span>\n                      </div>\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-gray-500\">No hay datos de asistencia</p>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ParentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}